<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="rmacrostrat">
<title>Making a geologic outcrop map with rmacrostrat • rmacrostrat</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Making a geologic outcrop map with rmacrostrat">
<meta property="og:description" content="rmacrostrat">
<meta property="og:image" content="https://rmacrostrat.palaeoverse.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rmacrostrat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/geologic-map.html">Making a geologic outcrop map with rmacrostrat</a>
    <a class="dropdown-item" href="../articles/geological-completeness.html">The Geological Completeness of Paleontological Sampling in North America</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/palaeoverse/rmacrostrat/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Making a geologic outcrop map with rmacrostrat</h1>
                        <h4 data-toc-skip class="author">Christopher D.
Dean</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/palaeoverse/rmacrostrat/blob/HEAD/vignettes/geologic-map.Rmd" class="external-link"><code>vignettes/geologic-map.Rmd</code></a></small>
      <div class="d-none name"><code>geologic-map.Rmd</code></div>
    </div>

    
    
<p><strong>Authors:</strong> <a href="https://palaeoverse.org/#about-us" class="external-link">The Palaeoverse Development
Team</a></p>
<p><strong>Last updated:</strong> 2024-06-04</p>
<div style="text-align: justify">
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><code>rmacrostrat</code> is an R package that allows users to easily
retrieve geologic data from the <a href="https://macrostrat.org" class="external-link">Macrostrat</a> database and facilitate
analyses within the R environment. This vignette (or tutorial if you
prefer) is provided to guide you through the installation process and
some of the functionality available within <code>rmacrostrat</code>. To
do so, we will focus on making a geographic map of a specific geologic
formation, a commonly required (and very important) figure within a
variety of papers across the geosciences.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The <code>rmacrostrat</code> package can be installed via CRAN or its
dedicated <a href="https://github.com/palaeoverse/rmacrostrat" class="external-link">GitHub
repository</a> if the development version is preferred. To install via
the CRAN, simply use:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rmacrostrat"</span><span class="op">)</span></span></code></pre></div>
<p>To install the development version, first install the
<code>devtools</code> package, and then use <code>install_github</code>
to install <code>rmacrostrat</code> directly from GitHub.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"palaeoverse/rmacrostrat"</span><span class="op">)</span></span></code></pre></div>
<p>You can now load <code>rmacrostrat</code> using the default
<code>library</code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rmacrostrat.palaeoverse.org">rmacrostrat</a></span><span class="op">)</span></span></code></pre></div>
<p><strong>Before we get onto the good stuff, the development team has a
small request</strong>. If you use <code>rmacrostrat</code> in your
research, please cite the associated publication. This will help us to
continue our work in supporting you to do yours. You can access the
appropriate citation via:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"rmacrostrat"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## To cite rmacrostrat in publications, use the following citation:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Jones, L.A., Gearty, W., Dean, C.D., Allen, B.J. 2024. rmacrostrat:</span></span>
<span><span class="co">##   An R Package for fetching geologic data from the Macrostrat database.</span></span>
<span><span class="co">##   TBC TBC TBC</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   @Article{,</span></span>
<span><span class="co">##     title = {rmacrostrat: An R Package for fetching geologic data from the Macrostrat database.},</span></span>
<span><span class="co">##     author = {Lewis A. Jones and William Gearty and Christopher D. Dean and Bethany J. Allen},</span></span>
<span><span class="co">##     year = {2024},</span></span>
<span><span class="co">##     journal = {TBC},</span></span>
<span><span class="co">##     pages = {TBC},</span></span>
<span><span class="co">##     doi = {TBC},</span></span>
<span><span class="co">##   }</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="context">Context<a class="anchor" aria-label="anchor" href="#context"></a>
</h2>
<p>The Hell Creek is a geologic formation from the late Cretaceous and
early Paleogene of North America, which is found cropping out across
Montana, North and South Dakota, and Wyoming in the United States. It
consists of both freshwater and brackish clays, mudstones, and
sandstones, representing a fluvial system on the shoreline of the
Western Interior Seaway. The Hell Creek is famous for its preservation
of an extensive array of both terrestrial and marginal marine fossils
from just prior to the K/Pg mass extinction, including widely
recognisable dinosaurs such as <em>Edmontosaurus</em>,
<em>Triceratops</em> and <em>Tyrannosaurus rex</em>. In this vignette,
we will show you how to use <code>rmacrostrat</code> to find the outcrop
of the Hell Creek Formation, and use this to create a map which could be
used in a potential publication. Whilst we have chosen a specific
formation, this methodology could be applied to any number of geologic
units of interest. So let’s dive in!</p>
</div>
<div class="section level2">
<h2 id="fetching">Fetching<a class="anchor" aria-label="anchor" href="#fetching"></a>
</h2>
<p>First, we want to find the <code>strat_name_id</code>s that are
associated with the Hell Creek, so we can grab all the available outcrop
for the formation. We can do this by using some of the <code>def_</code>
functions. These functions provide information about the information
stored in the Macrostrat database. Let’s have a look at the information
associated with the Hell Creek Formation, using
<code><a href="../reference/def_strat_names.html">def_strat_names()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get information for the chosen formation</span></span>
<span><span class="va">hc_def</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/def_strat_names.html">def_strat_names</a></span><span class="op">(</span>strat_name <span class="op">=</span> <span class="st">"hell creek"</span><span class="op">)</span></span>
<span><span class="va">hc_def</span></span></code></pre></div>
<pre><code><span><span class="co">##   strat_name      strat_name_long rank strat_name_id concept_id bed bed_id</span></span>
<span><span class="co">## 1 Hell Creek Hell Creek Formation   Fm         71267       8598          0</span></span>
<span><span class="co">## 2 Hell Creek    Hell Creek Member  Mbr         71268       8598          0</span></span>
<span><span class="co">## 3 Hell Creek Hell Creek Formation   Fm           867       8598          0</span></span>
<span><span class="co">##          mbr mbr_id         fm fm_id subgp subgp_id                gp gp_id sgp</span></span>
<span><span class="co">## 1                 0 Hell Creek 71267              0           Montana  2565    </span></span>
<span><span class="co">## 2 Hell Creek  71268      Lance  1090              0 Black Buttes coal 69391    </span></span>
<span><span class="co">## 3                 0 Hell Creek   867              0                       0    </span></span>
<span><span class="co">##   sgp_id b_age t_age   b_period  t_period c_interval t_units ref_id</span></span>
<span><span class="co">## 1      0 100.5    56 Cretaceous Paleogene                  0     19</span></span>
<span><span class="co">## 2      0 100.5    56 Cretaceous Paleogene                  0     19</span></span>
<span><span class="co">## 3      0  72.1    66 Cretaceous Paleogene                 13      1</span></span></code></pre>
<p>So we can see here that there are three different
<code>strat_name</code>s associated with the Hell Creek. You’ll also
notice that these all contain the same <code>concept_id</code>, showing
that this is one group of <code>strat_name</code>s which hopefully
represent the same geologic entity. We can therefore use this
<code>concept_id</code> to ensure we’ve got all mentions of the Hell
Creek:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get information for the chosen formation</span></span>
<span><span class="fu"><a href="../reference/def_strat_names.html">def_strat_names</a></span><span class="op">(</span>concept_id <span class="op">=</span> <span class="fl">8598</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   strat_name      strat_name_long rank strat_name_id concept_id bed bed_id</span></span>
<span><span class="co">## 1 Hell Creek Hell Creek Formation   Fm         71267       8598          0</span></span>
<span><span class="co">## 2 Hell Creek    Hell Creek Member  Mbr         71268       8598          0</span></span>
<span><span class="co">## 3 Hell Creek Hell Creek Formation   Fm           867       8598          0</span></span>
<span><span class="co">##          mbr mbr_id         fm fm_id subgp subgp_id                gp gp_id sgp</span></span>
<span><span class="co">## 1                 0 Hell Creek 71267              0           Montana  2565    </span></span>
<span><span class="co">## 2 Hell Creek  71268      Lance  1090              0 Black Buttes coal 69391    </span></span>
<span><span class="co">## 3                 0 Hell Creek   867              0                       0    </span></span>
<span><span class="co">##   sgp_id b_age t_age   b_period  t_period c_interval t_units ref_id</span></span>
<span><span class="co">## 1      0 100.5    56 Cretaceous Paleogene                  0     19</span></span>
<span><span class="co">## 2      0 100.5    56 Cretaceous Paleogene                  0     19</span></span>
<span><span class="co">## 3      0  72.1    66 Cretaceous Paleogene                 13      1</span></span></code></pre>
<p>Yup, that’s all the entries for the Hell Creek. But hang on! Before
going ahead and using these to pull our spatial data, you’ll also notice
that one of the <code>strat_name</code>s here is actually the Hell Creek
Member, which belongs to the Lance formation. Let’s try getting the
information again, this time specifying the stratigraphic rank of
“Formation”:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get information for the chosen formation, specifying by stratigraphic rank</span></span>
<span><span class="va">hc_def</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/def_strat_names.html">def_strat_names</a></span><span class="op">(</span>strat_name <span class="op">=</span> <span class="st">"hell creek"</span>, rank <span class="op">=</span> <span class="st">"Fm"</span><span class="op">)</span></span>
<span><span class="va">hc_def</span></span></code></pre></div>
<pre><code><span><span class="co">##   strat_name      strat_name_long rank strat_name_id concept_id bed bed_id mbr</span></span>
<span><span class="co">## 1 Hell Creek Hell Creek Formation   Fm         71267       8598          0    </span></span>
<span><span class="co">## 2 Hell Creek Hell Creek Formation   Fm           867       8598          0    </span></span>
<span><span class="co">##   mbr_id         fm fm_id subgp subgp_id      gp gp_id sgp sgp_id b_age t_age</span></span>
<span><span class="co">## 1      0 Hell Creek 71267              0 Montana  2565          0 100.5    56</span></span>
<span><span class="co">## 2      0 Hell Creek   867              0             0          0  72.1    66</span></span>
<span><span class="co">##     b_period  t_period c_interval t_units ref_id</span></span>
<span><span class="co">## 1 Cretaceous Paleogene                  0     19</span></span>
<span><span class="co">## 2 Cretaceous Paleogene                 13      1</span></span></code></pre>
<p>That’s much better. Let’s go ahead and use these
<code>strat_name_id</code>s to get some spatial data. To do this, we’ll
need to use the <code><a href="../reference/get_map_outcrop.html">get_map_outcrop()</a></code> function, which allows us
to grab outcrop polygons from geological maops. Let’s do that now,
specifying we want the output to be returned as an sf object.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get spatial outcrop information for the chosen formation</span></span>
<span><span class="va">hc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_map_outcrop.html">get_map_outcrop</a></span><span class="op">(</span>strat_name_id <span class="op">=</span> <span class="va">hc_def</span><span class="op">$</span><span class="va">strat_name_id</span>, sf <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Nice. Let’s have a look at the first entry to see what the data looks
like.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Look at the first entry</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">hc</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Simple feature collection with 1 feature and 20 fields</span></span>
<span><span class="co">## Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">## Dimension:     XY</span></span>
<span><span class="co">## Bounding box:  xmin: -110.0199 ymin: 45.86057 xmax: -110.0168 ymax: 45.86277</span></span>
<span><span class="co">## Geodetic CRS:  WGS 84</span></span>
<span><span class="co">##    map_id source_id                 name           strat_name</span></span>
<span><span class="co">## 1 2092425        25 Hell Creek Formation Hell Creek Formation</span></span>
<span><span class="co">##                            lith descrip comments macro_units       strat_names</span></span>
<span><span class="co">## 1 Major:: {sandstone, mudstone}                         9213 867, 71267, 71268</span></span>
<span><span class="co">##   liths t_int_id t_int_age      t_int_name b_int_id b_int_age      b_int_name</span></span>
<span><span class="co">## 1 7, 10       34        66 Late Cretaceous       34     100.5 Late Cretaceous</span></span>
<span><span class="co">##     color t_age b_age best_int_name                       geometry</span></span>
<span><span class="co">## 1 #F2FA8C    66  72.1 Maastrichtian MULTIPOLYGON (((-110.0168 4...</span></span></code></pre>
<p>That looks like what we need! Now let’s move on to visualizing the
data.</p>
</div>
<div class="section level2">
<h2 id="visualisation">Visualisation<a class="anchor" aria-label="anchor" href="#visualisation"></a>
</h2>
<p>To plot our outcrop map, we’ll have to load some packages that let us
handle and plot spatial data. Let’s do that now.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load required packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rnaturalearth/" class="external-link">rnaturalearth</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Linking to GEOS 3.10.2, GDAL 3.4.1, PROJ 8.2.1; sf_use_s2() is TRUE</span></span></code></pre>
<p>First, we can use the package <code>rnaturalearth</code> to get the
outlines of the USA, Canada and Mexico to use as a background.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load background information</span></span>
<span><span class="va">n_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_states.html" class="external-link">ne_states</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"united states of america"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## The rnaturalearthhires package needs to be installed.</span></span></code></pre>
<pre><code><span><span class="co">## Installing the rnaturalearthhires package.</span></span></code></pre>
<pre><code><span><span class="co">## Using github PAT from envvar GITHUB_PAT. Use `gitcreds::gitcreds_set()` and unset GITHUB_PAT in .Renviron (or elsewhere) if you want to use the more secure git credential store instead.</span></span></code></pre>
<pre><code><span><span class="co">## Downloading GitHub repo ropensci/rnaturalearthhires@HEAD</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="color: #00BBBB;">R CMD build</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">## * checking for file ‘/tmp/RtmpPOo31C/remotes1e8870029aa8/ropensci-rnaturalearthhires-dd1e210/DESCRIPTION’ ... OK</span></span>
<span><span class="co">## * preparing ‘rnaturalearthhires’:</span></span>
<span><span class="co">## * checking DESCRIPTION meta-information ... OK</span></span>
<span><span class="co">## * checking for LF line-endings in source and make files and shell scripts</span></span>
<span><span class="co">## * checking for empty or unneeded directories</span></span>
<span><span class="co">## * building ‘rnaturalearthhires_1.0.0.9000.tar.gz’</span></span></code></pre>
<pre><code><span><span class="co">## Installing package into '/home/runner/work/_temp/Library'</span></span>
<span><span class="co">## (as 'lib' is unspecified)</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_states.html" class="external-link">ne_states</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"canada"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="va">mx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_states.html" class="external-link">ne_states</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"mexico"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span></code></pre></div>
<p>We then have to set the coordinate system of the outcrop data we’ve
retrieved to match that of the state outlines. The <code>sf</code>
package allows us to do this with a very simple line of code:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set coordinate system</span></span>
<span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">hc</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">n_a</span><span class="op">)</span></span></code></pre></div>
<p>Now we’re ready to plot our outcrop! We can use the classic
<code>ggplot2</code> package to help us do this, in particular the
<code><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf()</a></code> function. Let’s plot our background maps and
outcrop now:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">n_a</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ca</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">hc</span>,</span>
<span>          color <span class="op">=</span> <span class="st">'#a75224'</span>,</span>
<span>          fill <span class="op">=</span> <span class="st">'#C7622B'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">112</span>, <span class="op">-</span><span class="fl">97</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">44</span>, <span class="fl">50</span><span class="op">)</span>, expand <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="plot%20outcrop-1.png" width="100%"></p>
<p>Looking good! But we can take this map a bit further. A common
dinosaur found in the Hell Creek is <em>Edmontosaurus</em>, a large
duck-billed dinosaur. Let’s combine what we’ve got so far with data from
<a href="https://paleobiodb.org" class="external-link">the Paleobiology Database</a> to make a
map of <em>Edmontosaurus</em> occurrences in the Hell Creek.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Access PBDB API for Edmontosaurus occurrences from the Hell Creek</span></span>
<span><span class="va">ed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"https://paleobiodb.org/data1.2/occs/list.csv?base_name=Edmontosaurus&amp;strat=Hell%20Creek&amp;pgm=gplates,scotese,seton&amp;show=full,strat,lith,ref"</span><span class="op">)</span></span>
<span><span class="co"># Turn points into spatial features</span></span>
<span><span class="va">ed_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ed</span>,                         </span>
<span>           coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lng"</span>, <span class="st">"lat"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Set coordinate system</span></span>
<span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">ed_sf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">n_a</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">hc</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">n_a</span><span class="op">)</span></span>
<span><span class="co"># Plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">n_a</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ca</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">hc</span>,</span>
<span>          color <span class="op">=</span> <span class="st">'#a75224'</span>,</span>
<span>          fill <span class="op">=</span> <span class="st">'#C7622B'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ed_sf</span>, </span>
<span>          color <span class="op">=</span> <span class="st">'black'</span>, </span>
<span>          size <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">112</span>, <span class="op">-</span><span class="fl">97</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">44</span>, <span class="fl">50</span><span class="op">)</span>, expand <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="plot%20Edmontosaurus-1.png" width="100%"></p>
<p>Those occurrences are now plotted up on the map. You can notice that
there are some that don’t overlay the outcrop entirely, despite
apparently being from the Hell Creek. This could be due to an error in
the PBDB data, potentially relating to the accuracy of the latitude and
longitude co-ordinates, or it could be that we’re missing outcrop data
of the Hell Creek. Either way, this shows that plotting occurrences up
with their respective outcrop can a good way to explore potential data
issues.</p>
<p>Asides from those errant occurrences, it’s starting to look pretty
good! But we can add a few more finishing touches to really make it pop.
First, let’s the use package <a href="https://rphylopic.palaeoverse.org/index.html" class="external-link"><code>rphylopic</code></a>
to add a silhouette of <em>Edmontosaurus</em> to the map.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the rphylopic package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rphylopic.palaeoverse.org" class="external-link">rphylopic</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## You are using rphylopic v.1.4.0. Please remember to credit PhyloPic contributors (hint: `get_attribution()`) and cite rphylopic in your work (hint: `citation("rphylopic")`).</span></span></code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get an appropriate silhouette for Edmontosaurus</span></span>
<span><span class="va">ed.uuid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rphylopic.palaeoverse.org/reference/get_uuid.html" class="external-link">get_uuid</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Edmontosaurus"</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co"># Get the credit for the author of the image</span></span>
<span><span class="fu"><a href="https://rphylopic.palaeoverse.org/reference/get_attribution.html" class="external-link">get_attribution</a></span><span class="op">(</span>uuid <span class="op">=</span> <span class="va">ed.uuid</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $images</span></span>
<span><span class="co">## $images$`72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc`</span></span>
<span><span class="co">## $images$`72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc`$attribution</span></span>
<span><span class="co">## [1] "Matt Dempsey"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $images$`72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc`$contributor</span></span>
<span><span class="co">## [1] "Matthew Dempsey"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $images$`72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc`$contributor_uuid</span></span>
<span><span class="co">## [1] "8185ae6d-4d70-4c22-96af-fc8b120cf9cc"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $images$`72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc`$created</span></span>
<span><span class="co">## [1] "2020-05-23"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $images$`72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc`$contact</span></span>
<span><span class="co">## [1] "sketchyraptor93@gmail.com"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $images$`72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc`$image_uuid</span></span>
<span><span class="co">## [1] "72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $images$`72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc`$license</span></span>
<span><span class="co">## [1] "https://creativecommons.org/licenses/by/3.0/"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $images$`72be89b9-3f2b-4dc3-b485-e74a5f8b1fbc`$license_abbr</span></span>
<span><span class="co">## [1] "CC BY 3.0"</span></span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Setup data.frame for the silhouette</span></span>
<span><span class="va">silhouette_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="op">-</span><span class="fl">99</span>, y <span class="op">=</span> <span class="fl">49.5</span>, name <span class="op">=</span> <span class="st">"Edmontosaurus"</span><span class="op">)</span></span>
<span><span class="co"># Plot the map</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">n_a</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ca</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">hc</span>,</span>
<span>          color <span class="op">=</span> <span class="st">'#a75224'</span>,</span>
<span>          fill <span class="op">=</span> <span class="st">'#C7622B'</span>,</span>
<span>          lwd <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ed_sf</span>, </span>
<span>          color <span class="op">=</span> <span class="st">'black'</span>, </span>
<span>          size <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">112</span>, <span class="op">-</span><span class="fl">97</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">44</span>, <span class="fl">50</span><span class="op">)</span>, expand <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rphylopic.palaeoverse.org/reference/geom_phylopic.html" class="external-link">geom_phylopic</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">silhouette_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span>, </span>
<span>              uuid <span class="op">=</span> <span class="va">ed.uuid</span>, </span>
<span>              size <span class="op">=</span> <span class="fl">0.8</span>, </span>
<span>              alpha <span class="op">=</span> <span class="fl">1</span>, </span>
<span>              color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></code></pre></div>
<p><img src="add%20rphylopic-1.png" width="100%"></p>
<p>Nice! Finally, we can add a few other touches to make it a
publication worthy figure, including an inlay map and a scale bar:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load `ggpatial` package to add annotations, and `cowplot` to stitch final map </span></span>
<span><span class="co"># together</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://paleolimbot.github.io/ggspatial/" class="external-link">ggspatial</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/cowplot/" class="external-link">cowplot</a></span><span class="op">)</span></span>
<span><span class="co"># Make an inlay using the country maps we included earlier</span></span>
<span><span class="va">inset</span> <span class="op">&lt;-</span> <span class="va">n_a</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ca</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mx</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_rect</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="op">-</span><span class="fl">112</span>, xmax <span class="op">=</span> <span class="op">-</span><span class="fl">97</span>, ymin <span class="op">=</span> <span class="fl">44</span>, ymax <span class="op">=</span> <span class="fl">50</span>, </span>
<span>            color <span class="op">=</span> <span class="st">"red"</span>, fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span><span class="op">-</span><span class="fl">130</span>, <span class="op">-</span><span class="fl">70</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">70</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_test</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.ticks.length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0</span>, <span class="st">"pt"</span><span class="op">)</span>,</span>
<span>        axis.title<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="st">"cm"</span><span class="op">)</span>,</span>
<span>        panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightblue"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Add a scale bar and new theme to the original map and save it</span></span>
<span><span class="va">ed_hc_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">n_a</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ca</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">hc</span>,</span>
<span>          color <span class="op">=</span> <span class="st">'#a75224'</span>,</span>
<span>          fill <span class="op">=</span> <span class="st">'#C7622B'</span>,</span>
<span>          lwd <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">ed_sf</span>, </span>
<span>          color <span class="op">=</span> <span class="st">'black'</span>, </span>
<span>          size <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">112</span>, <span class="op">-</span><span class="fl">97</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">44</span>, <span class="fl">50</span><span class="op">)</span>, expand <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://paleolimbot.github.io/ggspatial/reference/annotation_scale.html" class="external-link">annotation_scale</a></span><span class="op">(</span>location <span class="op">=</span> <span class="st">"br"</span>, width_hint <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rphylopic.palaeoverse.org/reference/geom_phylopic.html" class="external-link">geom_phylopic</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">silhouette_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span>, </span>
<span>              uuid <span class="op">=</span> <span class="va">ed.uuid</span>, </span>
<span>              size <span class="op">=</span> <span class="fl">0.8</span>, </span>
<span>              alpha <span class="op">=</span> <span class="fl">1</span>, </span>
<span>              color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># Plot the two together</span></span>
<span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/ggdraw.html" class="external-link">ggdraw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://wilkelab.org/cowplot/reference/draw_plot.html" class="external-link">draw_plot</a></span><span class="op">(</span><span class="va">ed_hc_map</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://wilkelab.org/cowplot/reference/draw_plot.html" class="external-link">draw_plot</a></span><span class="op">(</span><span class="va">inset</span>, <span class="fl">0.08</span>, <span class="fl">0.63</span>, width <span class="op">=</span> <span class="fl">0.2</span>, height <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Scale on map varies by more than 10%, scale bar may be inaccurate</span></span></code></pre>
<p><img src="add%20inlay%20and%20scale-1.png" width="100%"></p>
<p>And that’s it! One completed map.</p>
<p>Hopefully this vignette has shown you the potential uses for
<code>rmacrostrat</code> functions and helped provide a workflow for
your own analyses. If you have any questions about the package or its
functionality, please feel free to join our <a href="https://groups.google.com/g/palaeoverse" class="external-link">Palaeoverse Google
group</a> and leave a question; we’ll aim to answer it as soon as
possible!</p>
<p>If you’re interested in learning more about <code>rmacrostrat</code>,
don’t forget to check out our other vignettes! You can see which ones
are available by calling
<code>vignette(package = "rmacrostrat")</code>.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Gearty, W., and Jones, L.A., 2023, rphylopic: An R package for
fetching, transforming, and visualising PhyloPic silhouettes: Methods in
Ecology and Evolution, v. 14, p. 2700–2708, <a href="doi:10.1111/2041-210X.14221" class="uri">doi:10.1111/2041-210X.14221</a>.</p>
</div>
</div>
<style type="text/css">
p.caption {
  display: none;
}
</style></main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.lewisajones.com" class="external-link">Lewis A. Jones</a>, <a href="https://williamgearty.com" class="external-link">William Gearty</a>, <a href="https://bsse.ethz.ch/cevo/the-group/people/person-detail.html?persid=295484" class="external-link">Bethany Allen</a>, <a href="https://www.researchgate.net/profile/Christopher-Dean-15" class="external-link">Christopher D. Dean</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
